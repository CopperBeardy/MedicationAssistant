@using Microsoft.AspNetCore.Components.Forms;

<h3>@Mode PrescriptionAlert</h3>

@if(PrescriptionAlert != null)
{
<EditForm Model="@PrescriptionAlert"
          OnInvalidSubmit="(async () => await HandleSubmitAsync(false))"
          OnValidSubmit="(async () => await HandleSubmitAsync(true))">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <h2>Alert</h2>
    <p>

        <label>
            <h5><i class="fas fa-pills"></i> Prescription Title </h5>
            <InputDate @bind-Value="PrescriptionAlert.Title" />
            <ConcurrencyField Model="@PrescriptionAlert"
                              DbModel="@DbPrescriptionAlert"
                              Property="obj => obj?.TimeStamp.ToString()">
            </ConcurrencyField>
        </label>
    </p>

    <p>
        <h5><i class="fas fa-clock"></i> Alert Time>
    </p>


    <br />
    <button disabled="@Busy" class="btn btn-warning"
            @onclick="CancelAsync">
        Cancel
    </button>&nbsp;
    <button disabled="@Busy" type="submit"
            class="btn btn-primary">
        Submit
    </button>
</EditForm>
 }

    @code {
    [Parameter]
        public EventCallback<bool> ValidationResult { get; set; }


        [Parameter]
        public EventCallback CancelRequest { get; set; }


        [Parameter]
        public bool IsAdd { get; set; }


        [Parameter]
        public PrescriptionAlert PrescriptionAlert { get; set; }

        public List<Prescription> Presciptions {get;set;}

        [Parameter]
        public PrescriptionAlert DbPrescriptionAlert { get; set; }

        /// <summary>
        /// Prevent multiple asynchronous operations at the same time.
        /// </summary>
        [Parameter]
        public bool Busy { get; set; }

  
       
     
        /// <summary>
        /// Mode.
        /// </summary>
        private string Mode => IsAdd ? "Add" : "Edit";

        private Task CancelAsync()
        {
            return CancelRequest.InvokeAsync(null);
        }
      
        private Task HandleSubmitAsync(bool isValid)
        {
            return ValidationResult.InvokeAsync(isValid);
        }
    }